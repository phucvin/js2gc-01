Summary: Added `CompilerOptions` to enable configuration of inline caching (default: enabled). Updated compiler components to respect this option. Enhanced `run_benchmark.ts` to run benchmarks with both IC enabled and disabled, generate distinct `.ic.wat`/`.no_ic.wat` files, and report consolidated results in `README.md`, cleanly replacing old outputs.

# User Prompt

add options to compiler so it can be configured to enable inline cache (default is true)

run wasm benchmark with both inline cache enabled and disabled and report output to readme

also follow agents.md

# Agent Response

I have implemented the requested changes:

1.  **Compiler Options**:
    - Defined `CompilerOptions` interface in `src/compiler/context.ts` with `enableInlineCache?: boolean`.
    - Updated `CompilationContext` to store and expose these options.
    - Updated `compile` in `src/compiler/index.ts` to accept `options?: CompilerOptions`.
    - Updated `compileFunction` in `src/compiler/function.ts` to pass options down.
    - Fixed ESM/TypeScript import issues by using `import type` and `export type`.

2.  **Inline Caching Toggle**:
    - Modified `src/compiler/expression.ts` to check `ctx.getOptions().enableInlineCache`.
    - When enabled (default), it generates calls to cached helpers (`$add_cached`, `$sub_cached`, `$get_field_cached`).
    - When disabled, it generates calls to slow-path helpers (`$add_slow`, `$sub_slow`, `$get_field_slow`).

3.  **Benchmark Update**:
    - Updated `scripts/run_benchmark.ts` to:
      - Compile and run each benchmark twice: once with IC enabled, once disabled.
      - Generate distinct WAT files (`.ic.wat` and `.no_ic.wat`) for inspection.
      - Measure and collect performance metrics.
      - Format results into a Markdown table.
      - Replaces the "Benchmark Results" section in `README.md` cleanly to avoid duplication.

4.  **Verification**:
    - Ran `scripts/run_benchmark.ts`.
    - Verified that compilation works for both modes.
    - Verified that results are written to `README.md`.
    - Verified output files: `fib.ic.wat`, `fib.no_ic.wat`, etc.
    - Observed performance differences (e.g., `field_access.js` is significantly faster with IC).

5.  **Memory**:
    - Recorded the events in this session file.
